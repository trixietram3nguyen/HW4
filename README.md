# HW4
Name: Trixie Tram Nguyen, PSID:1518295

1. Objective: Ray tracing - adding some features to a barebones ray tracer using techniques we have discussed in lecture with given files such as Image.h/cpp, Scene.h/cpp, Sphere.h/cpp, and main.cpp.
2. Environment: Run and compile on Visual Studio 2019 on Windows with eigen library set up. Each of the image will be output to the png file, save it then submit to the repositiory.
3. Project detail: The given source codes in the zip file were just for example and help support further in the assignment. In order to complete the assignment, it required to add and modify more into the files. BE able to understand all the function that have been declared and defined in the given source. The first shape that had been implemented was the sphere but without any color. It is required to implement another ray-tracing shape of choice and be able to make use of phong shading from the previous homework assignment. Beside that, adding support for casting shadows and mirror surfaces that reflect rays of light also another requirement of the assignment. 
4. Explaination of completed code that need to be added: starting from main.cpp, new added image for ray tracing is a triangle. I modified the vector so that it placed below the sphere(from the image point of view). Color also had been added for the sphere and the triangle. That will be helpful for viewing and complete problem 4 which is reflection ray. In order to assign color to the object, I need to modify the Shape.h(which added the color vector to the struct Hitrecord). Sphere.h also had been modified which the Sphere function declaration updated to have another Vector3d spherecolor parameter, and sphereColor vector variable also defined in the class. Along with that, I added the result.color = sphereColor; to the Sphere.cpp to assigned the correct color to the sphere(in this assignment there were originally 3 of them, 2 small sphere on top of 1 big sphere). Similarly to the sphere object, I added the Triangle.h/cpp to create the triengle and dp ray-tracing for that. Similiar structure to the Sphere.h/cpp but a little bit different for the declaration which the sphere need the center, the triangle need 3 vectors to compute the barycentric coordinate for ray-tracing. That is for Triangle.h, for the Triangle.cpp we still define the intersect function to find out where is the light will be intersect with the triangle by passing the primary ray. First, I calculate the normal vector then check to see if the ray hit the triangle or not, using the barycentric coordinate to check if the ray is hitting inside or outside the triangle. Now, come to the most important part of the assignemnt which is modify the Scene.h/cpp to satisfy the requirement in problem 1, 2, 3, and 4. In problem 1, it required to add another shape to the scene which I added the triangle plane in this case, so modified the main.cpp, Shape.h, and adding Triangle.h/cpp is done for the part. In problem 2, it required to add phong shading so that the image have some color which that required to modified the trace function in Scene.cpp. Below the given fragment of code which computed the diffuse light only I added ambient, and specular and the result of phong shading to added color to the spheres and triangle. To be less confuse, I commented the given diffuse code out and added another one below ambient light to computer for phong shading. When the phong shading is done, the last job is to recalculate the color vector for the object which multiply the phong result with the object color. For problemt 3, it required to cast the shadow of an object which the algorithm is if the ray hit the object and there is a ray come out from it, if that ray hit another object to the light source, then there is a shadow casting on it. So I define another ray variable called shadowRay, calculate the shadowRay origin and direction then traverse through the shape to see if the shadow ray intersect with something. It it does, then return the result which now is the black color for shadow, else just return the color with phong shading. For problem 4, it required to implement the mirrors reflective shadow using recursive. Because of that, I had to modified the trace function declaration and definition. I created another function called traceHelper so in ther render function, whenever the the ray is passing to the object, that function will always be call instead of the trace function. In the traceHelper, the trace function is return with the ray and the counter number(this is the part that I added in). The counter is used to limited the recursion depth. Now, the shadow code fragment will be comment out for less confusion. A new ray variable is defined which is the reflectiveRay, then calculate the origin and direction of that ray. If the counter is less than 5, then keep calling the trace function for the reflective which in the function it also check to see if the ray is intersect another object, then cast the reflective ray. Notice that, the Image.h/cpp, and Shape.cpp were not modify. 
5. Result: For the first image which is the result of the first problem, it just the white and black color which from the orginal code. I only added the triangle plane under the spheres, but it kind of hard to see because of the darker part. The second problem now show a better version of the spheres and the triangle because of phong shading which add the color to it. I added the blue color for the smaller spheres, orange for the big one, and green for the triangle plane. The third image which is the result of the third problem showin the shadow of the sphere casting on the triangle plane. As we see from the image that the source of light is coming somewhere from the top right which casted the shadow of the sphere onto the triangle plane to the bottom left corner so it seem to be correct. Image 4 which is the result of problem 4 which is the reflection. It seem like the object actually reflecting on each other, although, I expected the object to be shinny too so it seem a little off to me, and the reflecting color. However, I tried my best to make it as close to the expected outcome that I thought it should be(which I have been searching about it) as possible. 
6. Reference: https://www.scratchapixel.com/lessons/3d-basic-rendering/introduction-to-ray-tracing/adding-reflection-and-refraction 
https://www.scratchapixel.com/code.php?id=3&origin=/lessons/3d-basic-rendering/introduction-to-ray-tracing
https://www.scratchapixel.com/code.php?id=10&origin=/lessons/3d-basic-rendering/ray-tracing-rendering-simple-shapes&src=1
http://wwwx.cs.unc.edu/~rademach/xroads-RT/RTarticle.html#:~:text=If%20an%20object%20is%20reflective,refracted%20ray%20into%20the%20surface
https://www.scratchapixel.com/lessons/3d-basic-rendering/ray-tracing-rendering-a-triangle/ray-triangle-intersection-geometric-solution
